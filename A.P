DEF VAR DATA AS CHAR FORMAT "X(39)".
DEF VAR PGM AS CHAR FORMAT "X(8)"
    LABEL "ENTER PROGRAM TO COMPILE  WITHOUT EXTENSIONS".
DEF VAR EXT AS CHAR FORMAT "XX".
DEF VAR PGM-EXT AS CHAR FORMAT "X(10)".
DEF VAR CTR AS INTEGER.
EXT = ".P".
CTR = 0.
INPUT FROM C:\PSG-PROG\PROG.LST.
REPEAT:
SET DATA WITH NO-BOX NO-LABELS NO-ATTR-SPACE WIDTH 39.
PGM = SUBSTR(DATA,1,8).
IF LASTKEY = KEYCODE("ESC") OR LASTKEY = KEYCODE("F4") THEN LEAVE.
PGM-EXT = PGM + EXT.
COMPILE VALUE(PGM-EXT) SAVE.
CTR = CTR + 1.
CLEAR ALL NO-PAUSE.
HIDE NO-PAUSE.
END.
DISPLAY CTR.
